import{d as $,p as _,A as D,x as U,c as V,o as f,h as A,b as n,a as r,u as a,w as l,e as m,F as B,r as j,f as I,t as u,B as P,W as R}from"./app-DtRPc5aY.js";import{_ as T}from"./index-DrwXI422.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-DUrI2L1u.js";import{_ as i,a as b}from"./InputError.vue_vue_type_script_setup_true_lang-6YNpOapv.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-C_E6jE6j.js";import{_ as L,a as M,b as C,c as S,d as E}from"./SelectValue.vue_vue_type_script_setup_true_lang-n5WLvA2j.js";const W={class:"border-b pb-6"},H={class:"space-y-4"},J={class:"flex items-center space-x-2 pt-2"},K={class:"mt-4 space-y-2 rounded-lg border bg-gray-50 p-3 text-sm"},z={class:"flex justify-between"},G={class:"font-medium"},O={class:"flex justify-between"},Q={class:"font-medium"},X={class:"flex justify-between border-t pt-2 mt-2 font-bold text-base"},Y={class:"text-[#F08519]"},ne=$({__name:"DonationForm",props:{programId:{},fees:{}},setup(w){var v,k;const y=w,g=_(()=>D().props.auth.user),s=U({program_id:y.programId,amount:5e4,donator_name:((v=g.value)==null?void 0:v.name)??"",donator_email:((k=g.value)==null?void 0:k.email)??"",message:"",is_anonymous:!1,payment_method:"other_qris"}),x=_(()=>{const o=y.fees[s.payment_method],e=Number(s.amount)||0;if(typeof o=="number")return o;if(typeof o=="string"&&o.includes("%")){const t=parseFloat(o.replace("%",""));return isNaN(t)?0:Math.ceil(e*t/100)}return 0}),h=_(()=>(Number(s.amount)||0)+x.value),p=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o),F=o=>o?o.replace(/_/g," ").toUpperCase():"",N=()=>{s.processing=!0,P.post(route("donations.store"),s.data()).then(o=>{const{redirect_url:e,order_id:t}=o.data;e&&t?(window.open(e,"_blank"),s.reset(),R.visit(route("donations.status",{donation:t}))):alert("Tidak bisa mendapatkan URL pembayaran.")}).catch(o=>{var e,t,d;((e=o.response)==null?void 0:e.status)===422?s.errors=o.response.data.errors:alert(((d=(t=o.response)==null?void 0:t.data)==null?void 0:d.error)||"Terjadi kesalahan pada server.")}).finally(()=>{s.processing=!1})};return(o,e)=>(f(),V("form",{onSubmit:A(N,["prevent"]),class:"space-y-6 rounded-xl border bg-white p-6 shadow-md"},[n("div",W,[e[14]||(e[14]=n("h3",{class:"font-semibold mb-4 text-lg text-center"}," Salurkan Kebaikan Anda",-1)),n("div",H,[n("div",null,[r(a(i),{for:"amount",class:"mb-2"},{default:l(()=>e[5]||(e[5]=[m("Jumlah Donasi")])),_:1,__:[5]}),r(a(c),{id:"amount",type:"number",placeholder:"Rp 50.000",modelValue:a(s).amount,"onUpdate:modelValue":e[0]||(e[0]=t=>a(s).amount=t),required:"",class:"text-center text-lg font-bold"},null,8,["modelValue"]),r(b,{message:a(s).errors.amount,class:"mt-1"},null,8,["message"])]),n("div",null,[r(a(i),{for:"donator_name",class:"mb-2"},{default:l(()=>e[6]||(e[6]=[m("Nama Anda")])),_:1,__:[6]}),r(a(c),{id:"donator_name",type:"text",placeholder:"Nama Lengkap",modelValue:a(s).donator_name,"onUpdate:modelValue":e[1]||(e[1]=t=>a(s).donator_name=t),required:""},null,8,["modelValue"]),r(b,{message:a(s).errors.donator_name,class:"mt-1"},null,8,["message"])]),n("div",null,[r(a(i),{for:"donator_email",class:"mb-2"},{default:l(()=>e[7]||(e[7]=[m("Email Anda")])),_:1,__:[7]}),r(a(c),{id:"donator_email",type:"email",placeholder:"email@anda.com",modelValue:a(s).donator_email,"onUpdate:modelValue":e[2]||(e[2]=t=>a(s).donator_email=t),required:""},null,8,["modelValue"]),r(b,{message:a(s).errors.donator_email,class:"mt-1"},null,8,["message"])]),n("div",null,[r(a(i),{for:"payment_method",class:"mb-2"},{default:l(()=>e[8]||(e[8]=[m("Metode Pembayaran")])),_:1,__:[8]}),r(a(L),{modelValue:a(s).payment_method,"onUpdate:modelValue":e[3]||(e[3]=t=>a(s).payment_method=t)},{default:l(()=>[r(a(M),null,{default:l(()=>[r(a(C),{placeholder:"Pilih metode..."})]),_:1}),r(a(S),null,{default:l(()=>[(f(!0),V(B,null,j(o.fees,(t,d)=>(f(),I(a(E),{key:d,value:d},{default:l(()=>[m(u(F(d)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",J,[r(a(q),{id:"is_anonymous",checked:a(s).is_anonymous,"onUpdate:checked":e[4]||(e[4]=t=>a(s).is_anonymous=t)},null,8,["checked"]),r(a(i),{for:"is_anonymous",class:"text-sm font-normal"},{default:l(()=>e[9]||(e[9]=[m("Donasi sebagai Hamba Allah")])),_:1,__:[9]})]),n("div",K,[n("div",z,[e[10]||(e[10]=n("span",{class:"text-gray-600"},"Donasi",-1)),n("span",G,u(p(Number(a(s).amount)||0)),1)]),n("div",O,[e[11]||(e[11]=n("span",{class:"text-gray-600"},"Biaya Transaksi",-1)),n("span",Q,u(p(x.value)),1)]),n("div",X,[e[12]||(e[12]=n("span",null,"Total Pembayaran",-1)),n("span",Y,u(p(h.value)),1)])]),r(a(T),{type:"submit",class:"w-full h-12 text-lg bg-[#F08519] text-white hover:bg-[#F08519]/90",disabled:a(s).processing},{default:l(()=>e[13]||(e[13]=[m("Lanjutkan Pembayaran")])),_:1,__:[13]},8,["disabled"])])])],32))}});export{ne as _};
